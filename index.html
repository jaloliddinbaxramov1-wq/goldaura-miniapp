<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>GoldAURA Mini App</title>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <style>
    body { background:#0b0b0b; color:#d4af37; font-family: Arial, sans-serif; text-align:center; padding-top:40px; }
    .card { max-width: 420px; margin: 0 auto; background:#111; border:1px solid #2a2a2a; border-radius:14px; padding:18px; }
    .row { text-align:left; margin:10px 0; color:#eee; }
    .label { color:#9f8b3a; }
    button { margin-top:16px; padding:14px 22px; font-size:16px; border-radius:10px; border:none; background:#d4af37; cursor:pointer; }
    .muted { color:#888; font-size:12px; margin-top:10px; }
  </style>
</head>
<body>
  <h1 style="margin-bottom:10px;">GoldAURA</h1>
  <div class="card">
    <div class="row"><span class="label">user_id:</span> <span id="uid">‚Äî</span></div>
    <div class="row"><span class="label">name:</span> <span id="name">‚Äî</span></div>
    <div class="row"><span class="label">username:</span> <span id="uname">‚Äî</span></div>
    <div class="row"><span class="label">language:</span> <span id="lang">‚Äî</span></div>
    <div class="row"><span class="label">platform:</span> <span id="platform">‚Äî</span></div>

    <button onclick="Telegram.WebApp.close()">–ó–∞–∫—Ä—ã—Ç—å</button>
    <div class="muted">–ï—Å–ª–∏ –ø–æ–ª—è –ø—É—Å—Ç—ã–µ ‚Äî –æ—Ç–∫—Ä–æ–π –º–∏–Ω–∏-–∞–ø–ø –∏–º–µ–Ω–Ω–æ —á–µ—Ä–µ–∑ Telegram (–Ω–µ –ø—Ä–æ—Å—Ç–æ –≤ –±—Ä–∞—É–∑–µ—Ä–µ).</div>
  </div>

  <script>
    const tg = window.Telegram.WebApp;
    tg.ready();

    const u = tg.initDataUnsafe?.user;

    document.getElementById("platform").textContent = tg.platform || "‚Äî";

    if (!u) {
      document.getElementById("uid").textContent = "–Ω–µ—Ç –¥–∞–Ω–Ω—ã—Ö (–Ω–µ –∏–∑ Telegram)";
      document.getElementById("name").textContent = "‚Äî";
      document.getElementById("uname").textContent = "‚Äî";
      document.getElementById("lang").textContent = "‚Äî";
    } else {
      document.getElementById("uid").textContent = u.id ?? "‚Äî";
      document.getElementById("name").textContent =
        [u.first_name, u.last_name].filter(Boolean).join(" ") || "‚Äî";
      document.getElementById("uname").textContent = u.username ? "@"+u.username : "‚Äî";
      document.getElementById("lang").textContent = u.language_code || "‚Äî";
    }

    // (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å –Ω–∞ –≤–µ—Å—å —ç–∫—Ä–∞–Ω
    try { tg.expand(); } catch(e) {}
  </script>
</body><script>
  const v = Date.now();
  if (!location.search.includes('v=')) {
    location.replace(location.pathname + '?v=' + v);
  }
</script>
<script>
const tg = window.Telegram.WebApp;
tg.ready();

fetch("–¢–í–û–ô_APPS_SCRIPT_URL", {
  method: "POST",
  body: JSON.stringify({
    user_id: tg.initDataUnsafe.user.id,
    username: tg.initDataUnsafe.user.username || "",
    name: tg.initDataUnsafe.user.first_name || ""
  })
})
.then(res => res.json())
.then(data => {
  document.body.innerHTML += `
    <div style="margin-top:20px;color:gold">
      üí∞ –ë–∞–ª–∞–Ω—Å: ${data.balance} <br>
      üéÅ –ë–æ–Ω—É—Å: ${data.bonus} <br>
      ‚ùó –î–æ–ª–≥: ${data.debt}
    </div>
  `;
});
</script>
</html>
